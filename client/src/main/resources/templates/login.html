<!DOCTYPE html>
<html th:dir="#{direction}" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="#{siteName}"></title>
    <link rel="icon" type="image/ico" th:href="@{/images/favicon.png}"/>
    <link rel="stylesheet" type="text/css" th:href="#{direction} +'/bootstrap/dist/css/bootstrap.min.css'"/>
    <link rel="stylesheet" type="text/css" th:href="#{direction} +'/font-awesome/css/font-awesome.min.css'"/>
    <link rel="stylesheet" type="text/css" th:href="#{direction} +'/animate.css/animate.min.css'"/>
    <link rel="stylesheet" type="text/css" th:href="#{direction} +'/build/css/custom.css'"/>
    <style>
        .form-group {
            margin-right: auto!important;
            margin-left: auto!important;
            width: 100% !important;
        }
        .form-control {
            border-radius: 0 !important;
            width: 100% !important;
        }
        .bad input, .bad select, .bad textarea {
            border: 1px solid #CE5454!important;
            -webkit-box-shadow: 0 0 4px -2px #CE5454!important;
            box-shadow: 0 0 4px -2px #CE5454!important;
        }
        label, input, input[placeholder] {
            font-size: 12px !important;
        }

        .btn {
            margin-right: 0;
        }

        .alert {
            padding: 10px;
        }
    </style>
</head>
<body class="login" th:dir="#{direction}">
<div>
    <a class="hiddenanchor" id="signup"></a>
    <a class="hiddenanchor" id="signin"></a>
    <a class="hiddenanchor" id="send_otp"></a>

    <div class="login_wrapper">
        <div class="animate form login_form">
            <section class="login_content">
                <form id="login-form" th:action="@{/login}" method="POST" class="form-horizontal">
                    <h1 th:text="#{login} + ' ' + #{form}"></h1>

                    <div class="row">
                        <div class="col-xs-12 form-group">
                            <div class='alert alert-danger' th:if="${errorMsg != null && errorMsg!='invalidSession'}">
                                <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;
                                </button>
                                <p th:text="#{${errorMsg}}"></p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="text" class="form-control" th:placeholder="#{userName}" name="userName" autofocus
                               tabindex="1">
                        <span class="fa fa-user form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="password" class="form-control" th:placeholder="#{password}" name="password"
                               tabindex="2">
                        <span class="fa fa-lock form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 form-group">
                            <button tabindex="3" type="submit" class="btn btn-secondary" style="width: 100%;" th:value="#{enter}">Enter</button>
                        </div>
                    </div>
                    <div class="clearfix"></div>

                    <div class="separator">
                        <div class="row">
                            <div class="col-xs-12">
                                <p class="change_link">
                                    <th:block th:text="#{lostYourPass}"></th:block>
                                    <a class="send_otp" href="#send_otp" th:text="#{send} + ' OTP'">Send OTP</a>
                                </p>
                            </div>
                            <div class="col-xs-12">
                                <p class="change_link">New to site?
                                    <a href="#signup" class="to_register"> Create Account </a>
                                </p>
                            </div>
                        </div>

                        <div class="clearfix"></div>
                        <br/>

                        <div>
                            <h2><i class="fa fa-eye" style="width: 50px"></i>
                                <th:block th:text="#{siteName}"></th:block>
                            </h2>
                            <p>
                                <th:block th:text="#{AllRightReserved}"></th:block>
                                <th:block th:text="#{siteName}"></th:block>
                                <th:block th:text="#{forCompanyAt}"></th:block>
                            </p>
                        </div>
                    </div>
                </form>
            </section>
        </div>
        <div class="animate form send_otp_form">
            <section class="login_content">
                <form id="send_otp-form" th:action="@{/send-OTP}" method="POST" class="form-horizontal">
                    <h1 th:text="#{send} + ' OTP'"></h1>

                    <div class="row">
                        <div class="col-xs-12 form-group">
                            <div class='alert alert-danger' th:if="${errorMsg != null && errorMsg!='invalidSession'}">
                                <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;
                                </button>
                                <p th:text="#{${errorMsg}}"></p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="text" class="form-control" th:placeholder="#{email}" name="email" autofocus tabindex="1">
                        <span class="fa fa-envelope form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <button tabindex="2" type="submit" class="btn btn-secondary" style="width: 100%;" th:value="#{enter}">Enter</button>
                    </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="separator">
                        <div class="row">
                            <div class="col-xs-12">
                                <p class="change_link">Remember the password?
                                    <a href="#signin" class="to_register" th:text="#{login}">Log in</a>
                                </p>
                            </div>
                            <div class="col-xs-12">
                                <p class="change_link">New to site?&nbsp;
                                    <a href="#signup" class="to_register" th:text="#{createAccount}">Create Account</a>
                                </p>
                            </div>
                        </div>

                        <div class="clearfix"></div>
                        <br/>

                        <div>
                            <h2><i class="fa fa-eye" style="width: 50px"></i>
                                <th:block th:text="#{siteName}"></th:block>
                            </h2>
                            <p>
                                <th:block th:text="#{AllRightReserved}"></th:block>
                                <th:block th:text="#{siteName}"></th:block>
                                <th:block th:text="#{forCompanyAt}"></th:block>
                            </p>
                        </div>
                    </div>
                </form>
            </section>
        </div>
        <div id="register" class="animate form registration_form">
            <section class="login_content">
                <form id="register-form" th:action="@{/registration}" method="POST" th:object="${user}">
                    <h1 th:text="#{createAccount}">Create Account</h1>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <div class='alert alert-danger' th:if="${errorMsg != null && errorMsg!='invalidSession'}">
                            <button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button>
                            <p th:text="#{${errorMsg}}"></p>
                        </div>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="text" class="form-control" th:placeholder="#{userName}" id="userName"
                               name="userName" autofocus
                               tabindex="4">
                        <span class="fa fa-user form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="email" class="form-control" th:placeholder="#{email}" id="email"
                               name="email"
                               tabindex="5">
                        <span class="fa fa-envelope form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="password" class="form-control" th:placeholder="#{password}" id="password"
                               name="password" tabindex="6">
                        <span class="fa fa-lock form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="password" class="form-control" th:placeholder="#{repeatPassword}"
                               id="repeatPassword" name="repeatPassword" tabindex="6">
                        <span class="fa fa-lock form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="text" class="form-control" th:placeholder="#{name}" id="firstName" name="firstName"
                               tabindex="7">
                        <span class="fa fa-pencil form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="text" class="form-control" th:placeholder="#{lastName}" id="lastName"
                               name="lastName" tabindex="8">
                        <span class="fa fa-pencil form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <input type="text" class="form-control" th:placeholder="#{referralCode}" id="referralCode"
                               th:value="${referralCode ?: ''}" name="referralCode" tabindex="9">
                        <span class="fa fa-user form-control-feedback right" aria-hidden="true"></span>
                    </div>
                    </div>
                    <div class="row">
                    <div class="col-xs-12 form-group">
                        <button tabindex="10" type="submit" class="btn btn-secondary" style="width: 100%;" th:value="#{register}">Register</button>
                    </div>
                    </div>
                    <div class="clearfix"></div>

                    <div class="separator">
                        <div class="row">
                            <div class="col-xs-12">
                                <p class="change_link">Already a member ?
                                    <a href="#signin" class="to_register" th:text="#{login}">Log in</a>
                                </p>
                            </div>
                        </div>

                        <div class="clearfix"></div>
                        <br/>

                        <div>
                            <h2><i class="fa fa-eye" style="width: 50px"></i>
                                <th:block th:text="#{siteName}"></th:block>
                            </h2>
                            <p>
                                <th:block th:text="#{AllRightReserved}"/>
                                <th:block th:text="#{siteName}"/>
                                <th:block th:text="#{forCompanyAt}"/>
                            </p>
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </div>
</div>
<script th:src="'/js/messages/messages.' + #{locale} + '.js'" type="text/javascript"></script>
<script type="text/javascript" th:src="#{direction} +'/jquery/dist/jquery.min.js'"></script>
<script th:src="@{/js/lib/jquery.validate.min.js}" type="text/javascript"></script>
<script type="text/javascript" th:src="#{direction} +'/bootstrap/dist/js/bootstrap.bundle.min.js'"></script>
<script type="text/javascript" th:src="#{direction} +'/fastclick/lib/fastclick.js'"></script>
<script type="text/javascript" th:src="#{direction} +'/build/js/custom.min.js'"></script>



<script type="text/javascript">
    if (!String.prototype.format) {
        String.prototype.format = function () {
            var args = arguments;
            return this.replace(/{(\d+)}/g, function (match, number) {
                return typeof args[number] != 'undefined'
                    ? args[number]
                    : match
                    ;
            });
        };
    }
    $(function () {
        $('#login-form').validate({
            rules: {
                userName: "required",
                password: "required"
            },
            messages: {
                userName: resources.pleaseEnter.format(resources.userName),
                password: resources.pleaseEnter.format(resources.password)
            },
            highlight: function (element) {
                $(element).addClass('is-invalid').closest('.col-xs-12').addClass('bad');
            },
            unhighlight: function (element) {
                $(element).removeClass('is-invalid').closest('.col-xs-12').removeClass('bad');
            },
            errorElement: 'span',
            errorClass: 'invalid-feedback',
            errorPlacement: function (error, element) {
                if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            },
            submitHandler: function (form) {
                form.submit();
            }
        });
        $('#send_otp-form').validate({
            rules: {
                email: {
                    required: true,
                    email: true
                }
            },
            messages: {
                email: {
                    required: resources.pleaseEnter.format(resources.email),
                    email: resources.invalidFormat.format(resources.email)
                }
            },
            highlight: function (element) {
                $(element).addClass('is-invalid').closest('.col-xs-12').addClass('bad');
            },
            unhighlight: function (element) {
                $(element).removeClass('is-invalid').closest('.col-xs-12').removeClass('bad');
            },
            errorElement: 'span',
            errorClass: 'invalid-feedback',
            errorPlacement: function (error, element) {
                if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            },
            submitHandler: function (form) {
                form.submit();
            }
        });

        $('#register-form').validate({
            // ignore: '.skip',
            rules: {
                userName: "required",
                email: {
                    required: true,
                    email: true
                },
                firstName: "required",
                lastName: "required",
                password: {
                    required: true,
                    minlength: 5
                },
                repeatPassword: {
                    required: true,
                    minlength: 5,
                    equalTo: "#password"
                },
            },
            messages: {
                userName: resources.pleaseEnter.format(resources.userName),
                email: {
                    required: resources.pleaseEnter.format(resources.email),
                    email: resources.invalidFormat.format(resources.email)
                },
                firstName: resources.pleaseEnter.format(resources.name),
                lastName: resources.pleaseEnter.format(resources.lastName),
                password: {
                    required: resources.pleaseEnter.format(resources.password),
                    minlength: resources.mustBeMoreThan.format(resources.password, 5, resources.character)
                },
                repeatPassword: {
                    required: resources.pleaseEnter.format(resources.repeatPassword),
                    minlength: resources.mustBeMoreThan.format(resources.password, 5, resources.character),
                    equalTo: resources.confirmPasswordDoesNotMach
                }
            },
            highlight: function (element) {
                $(element).addClass('is-invalid').closest('.col-xs-12').addClass('bad');
            },
            unhighlight: function (element) {
                $(element).removeClass('is-invalid').closest('.col-xs-12').removeClass('bad');
            },
            errorElement: 'span',
            errorClass: 'invalid-feedback',
            errorPlacement: function (error, element) {
                if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            },
            submitHandler: function (form) {
                form.submit();
            }
        });
    });
</script>
</body>
</html>